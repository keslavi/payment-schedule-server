{"version":3,"sources":["helpers/date-time.js","helpers/schedules-generator.js","store/actions/schedule-action.js","store/reducers/schedule-reducer.js","store/reducers/index.js","helpers/store.js","helpers/history.js","helpers/redux-form-helpers.js","Schedule.js","App.js","serviceWorker.js","index.js","helpers/error.js","helpers/utils.js","helpers/financial.js"],"names":["error","require","utils","d1900","Date","WEEK_STARTS","undefined","WEEK_TYPES","WEEKEND_TYPES","isLeapYear","year","getMonth","daysBetween","start_date","end_date","Math","ceil","serial","date","exports","DATE","month","day","parseNumber","anyIsError","value","num","DATEVALUE","date_text","parse","isNaN","DAY","serial_number","parseDate","Error","getDate","DAYS","DAYS360","method","parseBool","sd","ed","sm","em","smd","getFullYear","emd","EDATE","months","parseInt","setMonth","EOMONTH","HOUR","getHours","INTERVAL","second","floor","hour","min","sec","ISOWEEKNUM","setHours","setDate","getDay","yearStart","MINUTE","getMinutes","MONTH","NETWORKDAYS","holidays","this","INTL","weekend","Array","i","length","h","days","total","d","getTimezoneOffset","getUTCDay","dec","j","holiday","NOW","SECOND","getSeconds","TIME","minute","TIMEVALUE","time_text","TODAY","WEEKDAY","return_type","WEEKNUM","week_start","jan","inc","abs","WORKDAY","YEAR","YEARFRAC","basis","sy","ey","ylength","date1","date2","year1","mar1year1","year2","mar1year2","feb29Between","years","average","Number","prototype","toMoney","decimals","decimal_sep","thousands_sep","n","c","t","sign","toFixed","substr","replace","slice","pmt","ir","np","pv","pay","pow","ret","id","pad","payment","time","rate","financeCharge","redeem","redeem31","redeem61","redeem91","size","s","getScheduleSum","amt","range","m","p","r","schedules","p12","parseFloat","paymentDet","payment2","CUMPRINC","push","ScheduleActions","GET_SCHEDULE","SELECTED_SCHEDULE","a","initState","lookup","rates","key","apr","max","ranges","rootReducer","combineReducers","schedule","state","arguments","action","type","payload","JSON","stringify","selected","form","formReducer","store","createStore","compose","applyMiddleware","promise","createBrowserHistory","currencyMask","createTextMask","pattern","createNumberMask","prefix","decimalPlaces","locale","colField","suffix","field","_field$meta2","meta","touched","className","concat","hasLabel","label","xs","react_default","createElement","reactstrap_es","Object","assign","title","placeholder","input","select","_field$meta4","map","item","momentLocalizer","moment","Schedule","values","console","log","props","find","x","getSchedule","selectSchedule","items","_this","_","isEmpty","subtext","fontSize","fontStyle","showAll","style","onClick","onSelect","handleSubmit","onSubmit","bind","Field","name","component","color","renderSchedules","renderSelected","Component","connect","ownProps","initialValues","reduxForm","enableReinitialize","validate","App","src_Schedule","Boolean","window","location","hostname","match","ReactDOM","render","es","rel","href","react_toastify_lib","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","nil","div0","ref","na","data","isFlat","array","isArray","flatten","result","argsToArray","apply","reduce","b","aIsArray","bIsArray","args","call","numbers","filter","el","cleanFloat","number","round","bool","up","toUpperCase","string","parseNumberArray","arr","len","parsed","parseMatrix","matrix","pnarr","getTime","parseDateArray","arrayValuesToNumbers","rest","idx","initial","dateTime","validDate","ensureDate","ACCRINT","issue","first","settlement","par","frequency","indexOf","ACCRINTM","AMORDEGRC","AMORLINC","COUPDAYBS","COUPDAYS","COUPDAYSNC","COUPNCD","COUPNUM","COUPPCD","CUMIPMT","periods","start","end","PMT","interest","FV","principal","DB","cost","salvage","life","period","current","ceiling","DDB","factor","DISC","DOLLARDE","dollar","fraction","LN10","power","LN2","DOLLARFR","DURATION","EFFECT","term","FVSCHEDULE","future","INTRATE","IPMT","present","IRR","guess","irrResult","dates","irrResultDeriv","frac","positive","negative","newRate","epsRate","resultValue","resultRate","contLoop","ISPMT","MDURATION","MIRR","finance_rate","reinvest_rate","payments","incomes","NPV","den","NOMINAL","NPER","ODDFPRICE","ODDFYIELD","ODDLPRICE","ODDLYIELD","PDURATION","PPMT","PRICE","PRICEDISC","PRICEMAT","PV","RATE","iter","close","t1","t2","NaN","RECEIVED","RRI","SLN","SYD","TBILLEQ","maturity","discount","TBILLPRICE","TBILLYIELD","price","VDB","XIRR","XNPV","YIELD","YIELDDISC","YIELDMAT"],"mappings":"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","file":"static/js/main.52850339.chunk.js","sourcesContent":["var error = require('./error');\r\nvar utils = require('./utils');\r\n\r\nvar d1900 = new Date(1900, 0, 1);\r\nvar WEEK_STARTS = [\r\n  undefined,\r\n  0,\r\n  1,\r\n  undefined,\r\n  undefined,\r\n  undefined,\r\n  undefined,\r\n  undefined,\r\n  undefined,\r\n  undefined,\r\n  undefined,\r\n  undefined,\r\n  1,\r\n  2,\r\n  3,\r\n  4,\r\n  5,\r\n  6,\r\n  0\r\n];\r\nvar WEEK_TYPES = [\r\n  [],\r\n  [1, 2, 3, 4, 5, 6, 7],\r\n  [7, 1, 2, 3, 4, 5, 6],\r\n  [6, 0, 1, 2, 3, 4, 5],\r\n  [],\r\n  [],\r\n  [],\r\n  [],\r\n  [],\r\n  [],\r\n  [],\r\n  [7, 1, 2, 3, 4, 5, 6],\r\n  [6, 7, 1, 2, 3, 4, 5],\r\n  [5, 6, 7, 1, 2, 3, 4],\r\n  [4, 5, 6, 7, 1, 2, 3],\r\n  [3, 4, 5, 6, 7, 1, 2],\r\n  [2, 3, 4, 5, 6, 7, 1],\r\n  [1, 2, 3, 4, 5, 6, 7]\r\n];\r\nvar WEEKEND_TYPES = [\r\n  [],\r\n  [6, 0],\r\n  [0, 1],\r\n  [1, 2],\r\n  [2, 3],\r\n  [3, 4],\r\n  [4, 5],\r\n  [5, 6],\r\n  undefined,\r\n  undefined,\r\n  undefined, [0, 0],\r\n  [1, 1],\r\n  [2, 2],\r\n  [3, 3],\r\n  [4, 4],\r\n  [5, 5],\r\n  [6, 6]\r\n];\r\n\r\nexports.DATE = function(year, month, day) {\r\n  year = utils.parseNumber(year);\r\n  month = utils.parseNumber(month);\r\n  day = utils.parseNumber(day);\r\n  if (utils.anyIsError(year, month, day)) {\r\n    return error.value;\r\n  }\r\n  if (year < 0 || month < 0 || day < 0) {\r\n    return error.num;\r\n  }\r\n  var date = new Date(year, month - 1, day);\r\n  return date;\r\n};\r\n\r\nexports.DATEVALUE = function(date_text) {\r\n  if (typeof date_text !== 'string') {\r\n    return error.value;\r\n  }\r\n  var date = Date.parse(date_text);\r\n  if (isNaN(date)) {\r\n    return error.value;\r\n  }\r\n  if (date <= -2203891200000) {\r\n    return (date - d1900) / 86400000 + 1;\r\n  }\r\n  return (date - d1900) / 86400000 + 2;\r\n};\r\n\r\nexports.DAY = function(serial_number) {\r\n  var date = utils.parseDate(serial_number);\r\n  if (date instanceof Error) {\r\n    return date;\r\n  }\r\n  return date.getDate();\r\n};\r\n\r\nexports.DAYS = function(end_date, start_date) {\r\n  end_date = utils.parseDate(end_date);\r\n  start_date = utils.parseDate(start_date);\r\n  if (end_date instanceof Error) {\r\n    return end_date;\r\n  }\r\n  if (start_date instanceof Error) {\r\n    return start_date;\r\n  }\r\n  return serial(end_date) - serial(start_date);\r\n};\r\n\r\nexports.DAYS360 = function(start_date, end_date, method) {\r\n  method = utils.parseBool(method);\r\n  start_date = utils.parseDate(start_date);\r\n  end_date = utils.parseDate(end_date);\r\n  if (start_date instanceof Error) {\r\n    return start_date;\r\n  }\r\n  if (end_date instanceof Error) {\r\n    return end_date;\r\n  }\r\n  if (method instanceof Error) {\r\n    return method;\r\n  }\r\n  var sm = start_date.getMonth();\r\n  var em = end_date.getMonth();\r\n  var sd, ed;\r\n  if (method) {\r\n    sd = start_date.getDate() === 31 ? 30 : start_date.getDate();\r\n    ed = end_date.getDate() === 31 ? 30 : end_date.getDate();\r\n  } else {\r\n    var smd = new Date(start_date.getFullYear(), sm + 1, 0).getDate();\r\n    var emd = new Date(end_date.getFullYear(), em + 1, 0).getDate();\r\n    sd = start_date.getDate() === smd ? 30 : start_date.getDate();\r\n    if (end_date.getDate() === emd) {\r\n      if (sd < 30) {\r\n        em++;\r\n        ed = 1;\r\n      } else {\r\n        ed = 30;\r\n      }\r\n    } else {\r\n      ed = end_date.getDate();\r\n    }\r\n  }\r\n  return 360 * (end_date.getFullYear() - start_date.getFullYear()) +\r\n    30 * (em - sm) + (ed - sd);\r\n};\r\n\r\nexports.EDATE = function(start_date, months) {\r\n  start_date = utils.parseDate(start_date);\r\n  if (start_date instanceof Error) {\r\n    return start_date;\r\n  }\r\n  if (isNaN(months)) {\r\n    return error.value;\r\n  }\r\n  months = parseInt(months, 10);\r\n  start_date.setMonth(start_date.getMonth() + months);\r\n  return serial(start_date);\r\n};\r\n\r\nexports.EOMONTH = function(start_date, months) {\r\n  start_date = utils.parseDate(start_date);\r\n  if (start_date instanceof Error) {\r\n    return start_date;\r\n  }\r\n  if (isNaN(months)) {\r\n    return error.value;\r\n  }\r\n  months = parseInt(months, 10);\r\n  return serial(new Date(start_date.getFullYear(), start_date.getMonth() + months + 1, 0));\r\n};\r\n\r\nexports.HOUR = function(serial_number) {\r\n  serial_number = utils.parseDate(serial_number);\r\n  if (serial_number instanceof Error) {\r\n    return serial_number;\r\n  }\r\n  return serial_number.getHours();\r\n};\r\n\r\nexports.INTERVAL = function (second) {\r\n  if (typeof second !== 'number' && typeof second !== 'string') {\r\n    return error.value;\r\n  } else {\r\n    second = parseInt(second, 10);\r\n  }\r\n\r\n  var year  = Math.floor(second/946080000);\r\n  second    = second%946080000;\r\n  var month = Math.floor(second/2592000);\r\n  second    = second%2592000;\r\n  var day   = Math.floor(second/86400);\r\n  second    = second%86400;\r\n\r\n  var hour  = Math.floor(second/3600);\r\n  second    = second%3600;\r\n  var min   = Math.floor(second/60);\r\n  second    = second%60;\r\n  var sec   = second;\r\n\r\n  year  = (year  > 0) ? year  + 'Y' : '';\r\n  month = (month > 0) ? month + 'M' : '';\r\n  day   = (day   > 0) ? day   + 'D' : '';\r\n  hour  = (hour  > 0) ? hour  + 'H' : '';\r\n  min   = (min   > 0) ? min   + 'M' : '';\r\n  sec   = (sec   > 0) ? sec   + 'S' : '';\r\n\r\n  return 'P' + year + month + day +\r\n  'T' + hour + min + sec;\r\n};\r\n\r\nexports.ISOWEEKNUM = function(date) {\r\n  date = utils.parseDate(date);\r\n  if (date instanceof Error) {\r\n    return date;\r\n  }\r\n\r\n  date.setHours(0, 0, 0);\r\n  date.setDate(date.getDate() + 4 - (date.getDay() || 7));\r\n  var yearStart = new Date(date.getFullYear(), 0, 1);\r\n  return Math.ceil((((date - yearStart) / 86400000) + 1) / 7);\r\n};\r\n\r\nexports.MINUTE = function(serial_number) {\r\n  serial_number = utils.parseDate(serial_number);\r\n  if (serial_number instanceof Error) {\r\n    return serial_number;\r\n  }\r\n  return serial_number.getMinutes();\r\n};\r\n\r\nexports.MONTH = function(serial_number) {\r\n  serial_number = utils.parseDate(serial_number);\r\n  if (serial_number instanceof Error) {\r\n    return serial_number;\r\n  }\r\n  return serial_number.getMonth() + 1;\r\n};\r\n\r\nexports.NETWORKDAYS = function(start_date, end_date, holidays) {\r\n  return this.NETWORKDAYS.INTL(start_date, end_date, 1, holidays);\r\n};\r\n\r\nexports.NETWORKDAYS.INTL = function(start_date, end_date, weekend, holidays) {\r\n  start_date = utils.parseDate(start_date);\r\n  if (start_date instanceof Error) {\r\n    return start_date;\r\n  }\r\n  end_date = utils.parseDate(end_date);\r\n  if (end_date instanceof Error) {\r\n    return end_date;\r\n  }\r\n  if (weekend === undefined) {\r\n    weekend = WEEKEND_TYPES[1];\r\n  } else {\r\n    weekend = WEEKEND_TYPES[weekend];\r\n  }\r\n  if (!(weekend instanceof Array)) {\r\n    return error.value;\r\n  }\r\n  if (holidays === undefined) {\r\n    holidays = [];\r\n  } else if (!(holidays instanceof Array)) {\r\n    holidays = [holidays];\r\n  }\r\n  for (var i = 0; i < holidays.length; i++) {\r\n    var h = utils.parseDate(holidays[i]);\r\n    if (h instanceof Error) {\r\n      return h;\r\n    }\r\n    holidays[i] = h;\r\n  }\r\n  var days = (end_date - start_date) / (1000 * 60 * 60 * 24) + 1;\r\n  var total = days;\r\n  var day = start_date;\r\n  for (i = 0; i < days; i++) {\r\n    var d = (new Date().getTimezoneOffset() > 0) ? day.getUTCDay() : day.getDay();\r\n    var dec = false;\r\n    if (d === weekend[0] || d === weekend[1]) {\r\n      dec = true;\r\n    }\r\n    for (var j = 0; j < holidays.length; j++) {\r\n      var holiday = holidays[j];\r\n      if (holiday.getDate() === day.getDate() &&\r\n        holiday.getMonth() === day.getMonth() &&\r\n        holiday.getFullYear() === day.getFullYear()) {\r\n        dec = true;\r\n        break;\r\n      }\r\n    }\r\n    if (dec) {\r\n      total--;\r\n    }\r\n    day.setDate(day.getDate() + 1);\r\n  }\r\n  return total;\r\n};\r\n\r\nexports.NOW = function() {\r\n  return new Date();\r\n};\r\n\r\nexports.SECOND = function(serial_number) {\r\n  serial_number = utils.parseDate(serial_number);\r\n  if (serial_number instanceof Error) {\r\n    return serial_number;\r\n  }\r\n  return serial_number.getSeconds();\r\n};\r\n\r\nexports.TIME = function(hour, minute, second) {\r\n  hour = utils.parseNumber(hour);\r\n  minute = utils.parseNumber(minute);\r\n  second = utils.parseNumber(second);\r\n  if (utils.anyIsError(hour, minute, second)) {\r\n    return error.value;\r\n  }\r\n  if (hour < 0 || minute < 0 || second < 0) {\r\n    return error.num;\r\n  }\r\n  return (3600 * hour + 60 * minute + second) / 86400;\r\n};\r\n\r\nexports.TIMEVALUE = function(time_text) {\r\n  time_text = utils.parseDate(time_text);\r\n  if (time_text instanceof Error) {\r\n    return time_text;\r\n  }\r\n  return (3600 * time_text.getHours() +\r\n    60 * time_text.getMinutes() +\r\n    time_text.getSeconds()) / 86400;\r\n};\r\n\r\nexports.TODAY = function() {\r\n  return new Date();\r\n};\r\n\r\nexports.WEEKDAY = function(serial_number, return_type) {\r\n  serial_number = utils.parseDate(serial_number);\r\n  if (serial_number instanceof Error) {\r\n    return serial_number;\r\n  }\r\n  if (return_type === undefined) {\r\n    return_type = 1;\r\n  }\r\n  var day = serial_number.getDay();\r\n  return WEEK_TYPES[return_type][day];\r\n};\r\n\r\nexports.WEEKNUM = function(serial_number, return_type) {\r\n  serial_number = utils.parseDate(serial_number);\r\n  if (serial_number instanceof Error) {\r\n    return serial_number;\r\n  }\r\n  if (return_type === undefined) {\r\n    return_type = 1;\r\n  }\r\n  if (return_type === 21) {\r\n    return this.ISOWEEKNUM(serial_number);\r\n  }\r\n  var week_start = WEEK_STARTS[return_type];\r\n  var jan = new Date(serial_number.getFullYear(), 0, 1);\r\n  var inc = jan.getDay() < week_start ? 1 : 0;\r\n  jan -= Math.abs(jan.getDay() - week_start) * 24 * 60 * 60 * 1000;\r\n  return Math.floor(((serial_number - jan) / (1000 * 60 * 60 * 24)) / 7 + 1) + inc;\r\n};\r\n\r\nexports.WORKDAY = function(start_date, days, holidays) {\r\n  return this.WORKDAY.INTL(start_date, days, 1, holidays);\r\n};\r\n\r\nexports.WORKDAY.INTL = function(start_date, days, weekend, holidays) {\r\n  start_date = utils.parseDate(start_date);\r\n  if (start_date instanceof Error) {\r\n    return start_date;\r\n  }\r\n  days = utils.parseNumber(days);\r\n  if (days instanceof Error) {\r\n    return days;\r\n  }\r\n  if (days < 0) {\r\n    return error.num;\r\n  }\r\n  if (weekend === undefined) {\r\n    weekend = WEEKEND_TYPES[1];\r\n  } else {\r\n    weekend = WEEKEND_TYPES[weekend];\r\n  }\r\n  if (!(weekend instanceof Array)) {\r\n    return error.value;\r\n  }\r\n  if (holidays === undefined) {\r\n    holidays = [];\r\n  } else if (!(holidays instanceof Array)) {\r\n    holidays = [holidays];\r\n  }\r\n  for (var i = 0; i < holidays.length; i++) {\r\n    var h = utils.parseDate(holidays[i]);\r\n    if (h instanceof Error) {\r\n      return h;\r\n    }\r\n    holidays[i] = h;\r\n  }\r\n  var d = 0;\r\n  while (d < days) {\r\n    start_date.setDate(start_date.getDate() + 1);\r\n    var day = start_date.getDay();\r\n    if (day === weekend[0] || day === weekend[1]) {\r\n      continue;\r\n    }\r\n    for (var j = 0; j < holidays.length; j++) {\r\n      var holiday = holidays[j];\r\n      if (holiday.getDate() === start_date.getDate() &&\r\n        holiday.getMonth() === start_date.getMonth() &&\r\n        holiday.getFullYear() === start_date.getFullYear()) {\r\n        d--;\r\n        break;\r\n      }\r\n    }\r\n    d++;\r\n  }\r\n  return start_date;\r\n};\r\n\r\nexports.YEAR = function(serial_number) {\r\n  serial_number = utils.parseDate(serial_number);\r\n  if (serial_number instanceof Error) {\r\n    return serial_number;\r\n  }\r\n  return serial_number.getFullYear();\r\n};\r\n\r\nfunction isLeapYear(year) {\r\n  return new Date(year, 1, 29).getMonth() === 1;\r\n}\r\n\r\n// TODO : Use DAYS ?\r\nfunction daysBetween(start_date, end_date) {\r\n  return Math.ceil((end_date - start_date) / 1000 / 60 / 60 / 24);\r\n}\r\n\r\nexports.YEARFRAC = function(start_date, end_date, basis) {\r\n  start_date = utils.parseDate(start_date);\r\n  if (start_date instanceof Error) {\r\n    return start_date;\r\n  }\r\n  end_date = utils.parseDate(end_date);\r\n  if (end_date instanceof Error) {\r\n    return end_date;\r\n  }\r\n\r\n  basis = basis || 0;\r\n  var sd = start_date.getDate();\r\n  var sm = start_date.getMonth() + 1;\r\n  var sy = start_date.getFullYear();\r\n  var ed = end_date.getDate();\r\n  var em = end_date.getMonth() + 1;\r\n  var ey = end_date.getFullYear();\r\n\r\n  switch (basis) {\r\n    case 0:\r\n      // US (NASD) 30/360\r\n      if (sd === 31 && ed === 31) {\r\n        sd = 30;\r\n        ed = 30;\r\n      } else if (sd === 31) {\r\n        sd = 30;\r\n      } else if (sd === 30 && ed === 31) {\r\n        ed = 30;\r\n      }\r\n      return ((ed + em * 30 + ey * 360) - (sd + sm * 30 + sy * 360)) / 360;\r\n    case 1:\r\n      // Actual/actual\r\n      var feb29Between = function(date1, date2) {\r\n        var year1 = date1.getFullYear();\r\n        var mar1year1 = new Date(year1, 2, 1);\r\n        if (isLeapYear(year1) && date1 < mar1year1 && date2 >= mar1year1) {\r\n          return true;\r\n        }\r\n        var year2 = date2.getFullYear();\r\n        var mar1year2 = new Date(year2, 2, 1);\r\n        return (isLeapYear(year2) && date2 >= mar1year2 && date1 < mar1year2);\r\n      };\r\n      var ylength = 365;\r\n      if (sy === ey || ((sy + 1) === ey) && ((sm > em) || ((sm === em) && (sd >= ed)))) {\r\n        if ((sy === ey && isLeapYear(sy)) ||\r\n            feb29Between(start_date, end_date) ||\r\n            (em === 1 && ed === 29)) {\r\n          ylength = 366;\r\n        }\r\n        return daysBetween(start_date, end_date) / ylength;\r\n      }\r\n      var years = (ey - sy) + 1;\r\n      var days = (new Date(ey + 1, 0, 1) - new Date(sy, 0, 1)) / 1000 / 60 / 60 / 24;\r\n      var average = days / years;\r\n      return daysBetween(start_date, end_date) / average;\r\n    case 2:\r\n      // Actual/360\r\n      return daysBetween(start_date, end_date) / 360;\r\n    case 3:\r\n      // Actual/365\r\n      return daysBetween(start_date, end_date) / 365;\r\n    case 4:\r\n      // European 30/360\r\n      return ((ed + em * 30 + ey * 360) - (sd + sm * 30 + sy * 360)) / 360;\r\n  }\r\n};\r\n\r\nfunction serial(date) {\r\n  var addOn = (date > -2203891200000)?2:1;\r\n  return (date - d1900) / 86400000 + addOn;\r\n}","import { CUMIPMT, CUMPRINC } from './financial';\r\n\r\n  // eslint-disable-next-line\r\n  Number.prototype.toMoney = function(decimals, decimal_sep, thousands_sep)\r\n  {\r\n     var n = this,\r\n     c = isNaN(decimals) ? 2 : Math.abs(decimals),\r\n     d = decimal_sep || '.',\r\n     t = (typeof thousands_sep === 'undefined') ? ',' : thousands_sep,\r\n     sign = (n < 0) ? '-' : '',\r\n     // eslint-disable-next-line\r\n     i = parseInt(n = Math.abs(n).toFixed(c)) + '',\r\n     // eslint-disable-next-line\r\n     j = ((j = i.length) > 3) ? j % 3 : 0;\r\n     return sign + (j ? i.substr(0, j) + t : '') + i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : '');\r\n  }\r\n\r\n  // eslint-disable-next-line\r\n  function round(value, decimals) {\r\n      return Number(Math.round(value+'e'+decimals)+'e-'+decimals);\r\n  }\r\n\r\n\r\n  const pmt = (ir,np,pv) =>{//(rate, time, principle)\r\n        /*\r\n          final found good working example here:\r\n          http://www.quepublishing.com/articles/article.aspx?p=23230\r\n\r\n          formula:\r\n          PMT = PV x IR / (1 - (1 + IR) -NP)\r\n          converted to js:\r\n          PMT = (PV * IR) / (1 - Math.pow(1 + IR, -NP))\r\n        */\r\n        ir=ir/100;\r\n         let pay = (pv * ir) / (1 - Math.pow(1 + ir, -np));\r\n         const ret={\r\n           id: pad(np,2),\r\n           payment:(+(pay)).toMoney(),\r\n           time: +np,\r\n           rate: +ir,\r\n           financeCharge:((pay*np) - (pv)).toMoney(),\r\n           redeem: (pv + ((pay*np) - (pv))).toMoney(),\r\n         }\r\n\r\n         np=2;\r\n         pay=(pv * ir) / (1 - Math.pow(1 + ir, -np));\r\n         //ret.financeCharge31=((pay*np) - (pv)).toMoney();\r\n         ret.redeem31=(pv + ((pay*np) - (pv))).toMoney();\r\n\r\n         // np=3\r\n         // pay=(pv * ir) / (1 - Math.pow(1 + ir, -np));\r\n         //ret.financeCharge61=((pay*np) - (pv)).toMoney();\r\n         ret.redeem61=(pv + ((pay*np) - (pv))).toMoney();\r\n\r\n         // np=4\r\n         // pay=(pv * ir) / (1 - Math.pow(1 + ir, -np));\r\n         //ret.financeCharge91=((pay*np) - (pv)).toMoney();\r\n         ret.redeem91=(pv + ((pay*np) - (pv))).toMoney();\r\n\r\n         return ret;\r\n  }\r\n\r\n  export const getScheduleDet=(amt,time)=>{\r\n    var m={\r\n      principle:+(amt),\r\n      time:+(time),\r\n    }\r\n    var p = +(amt);\r\n    m.rate= p<=1975 ? +12.5 : +10;\r\n\r\n    let r = +(m.rate);\r\n    let t=+(time);\r\n    let ret=pmt(r,t,p);\r\n    return ret;\r\n  }\r\n\r\n  const pad=(num, size)=> {\r\n      const s = \"000000000\" + num;\r\n      return s.substr(s.length-size);\r\n  }\r\n\r\n  export const getScheduleSum=(amt,rate, range)=>{\r\n    var m   = {amt:+(amt)}\r\n    var p   = +(amt);\r\n    m.rate  = +(rate);//p<=1975 ? +12.5 : +10;// p<=1975 ? '152.083 APR' : '121.667 APR';\r\n    var r   = m.rate;\r\n    m.range = +(range);\r\n    m.schedules=[];\r\n\r\n    const p12 = parseFloat(pmt(r,12,p).payment); \r\n    const p12Tot = p12 * 12;\r\n    \r\n    for (let t = 1; t <= m.range; t++) {\r\n      let paymentDet=pmt(r,t,p);\r\n      if (t>12) {\r\n        paymentDet.payment = p12;\r\n        paymentDet.payment2 = (-CUMPRINC(m.rate/100,t,m.amt,13,t,0)/(t+1-13)).toMoney();\r\n      }\r\n      m.schedules.push(paymentDet);\r\n    }\r\n    return m;\r\n  }\r\n\r\n","import { getScheduleSum } from '../../helpers/schedules-generator';\r\n\r\nexport const ScheduleActions = {\r\n    GET_SCHEDULE : 'Get Schedule',\r\n    SELECTED_SCHEDULE : 'Selected Schedule'\r\n}\r\n\r\nconst a = ScheduleActions;\r\n\r\nexport function getSchedule(values) { \r\n    const payload= getScheduleSum(values.amt, values.rate, values.range);\r\n\r\n    return {\r\n        type: a.GET_SCHEDULE,\r\n        payload\r\n    }\r\n}\r\n\r\nexport function selectSchedule(values) { \r\n    const payload = values;\r\n        \r\n    return {\r\n        type: a.SELECTED_SCHEDULE,\r\n        payload\r\n    }\r\n}","\r\nimport { ScheduleActions as a } from '../actions/schedule-action';\r\nimport { getScheduleSum } from '../../helpers/schedules-generator';\r\n\r\n\r\nexport default function (state = initState, action) {\r\n    switch (action.type) {\r\n        case a.GET_SCHEDULE:\r\n            let payload = action.payload;\r\n            payload.lookup = state.lookup;\r\n            return payload;\r\n        case a.SELECTED_SCHEDULE:\r\n            const s= JSON.parse(JSON.stringify(state));\r\n            s.selected = action.payload;\r\n            return s;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst initState = {\r\n    amt: 500,\r\n    rate: 12.5,\r\n    range: 12,\r\n    schedules: [],\r\n    lookup: {\r\n        rates: [\r\n            {\r\n                key: +12.5,\r\n                value: '12.5',\r\n                apr: '152.083 APR*',\r\n                range: {\r\n                    min: +0,\r\n                    max: +1999\r\n                }\r\n            },\r\n            {\r\n                key: +10,\r\n                value: '10',\r\n                apr: '121.667 APR*',\r\n                range: {\r\n                    min: +2000,\r\n                    max: +2999\r\n                }\r\n            },\r\n            {\r\n                key: +8,\r\n                value: '8',\r\n                apr: '97.33 APR*',\r\n                range: {\r\n                    min: +3000,\r\n                    max: +50000\r\n                }\r\n            }\r\n        ],\r\n        ranges: [\r\n            {\r\n                key: +12,\r\n                value: '12 months'\r\n            },\r\n            {\r\n                key: +18,\r\n                value: '18 months'\r\n            }\r\n        ]\r\n    }\r\n\r\n};\r\n","import { combineReducers } from 'redux';\r\nimport {reducer as formReducer} from 'redux-form';\r\n\r\nimport ScheduleReducer from './schedule-reducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  schedule:ScheduleReducer,\r\n  form: formReducer\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore, applyMiddleware,compose } from 'redux';\r\n//import thunkMiddleware from 'redux-thunk';\r\nimport promise from 'redux-promise';\r\n\r\nimport rootReducer from '../store/reducers';\r\n\r\n//import { createLogger } from 'redux-logger';\r\n//const loggerMiddleware = createLogger();\r\n\r\nexport const store = createStore(\r\n    rootReducer,\r\n    compose(\r\n      applyMiddleware(promise)//,loggerMiddleware)\r\n    )\r\n);\r\n","import { createBrowserHistory } from 'history';\r\n\r\nexport const history = createBrowserHistory();\r\n","import React from 'react';\r\nimport {\r\n    Col\r\n    , FormGroup\r\n    , Label\r\n    , Input\r\n} from 'reactstrap';\r\n\r\nimport { createNumberMask, createTextMask } from 'redux-form-input-masks';\r\n//import moment from 'moment';\r\n\r\nexport const phoneMask = createTextMask({\r\n    pattern: '(999) 999-9999',\r\n});\r\n\r\nexport const ssnMask = createTextMask({\r\n    pattern: '999-99-9999',\r\n});\r\n\r\nexport const currencyMask = createNumberMask({\r\n    prefix: '$ ',\r\n    decimalPlaces: 2,\r\n    locale: 'en-US',\r\n})\r\n\r\nexport const percentageMask = createNumberMask({\r\n    suffix: '%',\r\n    locale: 'en-US',\r\n})\r\n\r\n\r\nexport const colTextArea = field => {\r\n    const { meta: { touched, error } } = field;\r\n    const className = `form-group ${touched && error ? 'has-danger' : ''}`\r\n    const hasLabel = !(typeof field.label === 'undefined');\r\n    const xs = field.xs || 3;\r\n    return (\r\n        <Col xs={xs}>\r\n            <FormGroup className={className}>\r\n                {hasLabel\r\n                    ? <Label>{field.label}</Label>\r\n                    : <span></span>\r\n                }\r\n                <div>\r\n                    <textarea rows={field.rows} cols={field.cols} title={field.placeholder}\r\n                        type=\"text\"\r\n                        placeholder={field.placeholder}\r\n                        {...field.input}\r\n                    >\r\n                    </textarea>\r\n                    <div>{touched ? error : ''}</div>\r\n                </div>\r\n            </FormGroup>\r\n        </Col>\r\n    )\r\n}\r\n\r\nexport const colField = field => {\r\n    const { meta: { touched, error } } = field;\r\n    const className = `form-group ${touched && error ? 'has-danger' : ''}`\r\n    const hasLabel = !(typeof field.label === 'undefined');\r\n    const xs = field.xs || 3;\r\n    return (\r\n        <Col xs={xs}>\r\n            <FormGroup className={className}>\r\n                {hasLabel\r\n                    ? <Label>{field.label}</Label>\r\n                    : <span></span>\r\n                }\r\n                <div>\r\n                    <Input title={field.placeholder}\r\n                        type=\"text\"\r\n                        placeholder={field.placeholder}\r\n                        {...field.input}\r\n                    />\r\n                    <div>{touched ? error : ''}</div>\r\n                </div>\r\n            </FormGroup>\r\n        </Col>\r\n    )\r\n}\r\nexport const readOnlyCol = field => {\r\n    const { meta: { touched, error } } = field;\r\n    const className = `form-group ${touched && error ? 'has-danger' : ''}`\r\n    const hasLabel = !(typeof field.label === 'undefined');\r\n    const xs = field.xs || 3;\r\n    return (\r\n        <Col xs={xs}>\r\n            <FormGroup className={className}>\r\n                {hasLabel\r\n                    ? <Label>{field.label}</Label>\r\n                    : <span></span>\r\n                }\r\n                <div>\r\n                    <Input title={field.placeholder}\r\n                        type=\"text\"\r\n                        placeholder={field.placeholder}\r\n                        readOnly='readonly'\r\n                        {...field.input}\r\n                    />\r\n                    <div>{touched ? error : ''}</div>\r\n                </div>\r\n            </FormGroup>\r\n        </Col>\r\n    )\r\n}\r\n\r\n\r\nexport const select = field => {\r\n    const { meta: { touched, error } } = field;\r\n    const className = `${touched && error ? 'has-danger' : ''}`\r\n    const hasLabel = !(typeof field.label === 'undefined');\r\n    const xs = field.xs || 3;\r\n\r\n    return (\r\n        <Col xs={xs}>\r\n            <FormGroup className='form-group'>\r\n                {hasLabel\r\n                    ? <Label>{field.label}</Label>\r\n                    : <span></span>\r\n                }\r\n                <div>\r\n                    <Input\r\n                        title={field.placeholder}\r\n                        className={className}\r\n                        type=\"select\"\r\n                        {...field.input}\r\n                    >\r\n                        <option key='' value=' '> </option>\r\n                        {field.lookup.map(function (item) {\r\n                            return (<option key={item.key} value={item.key}>{item.value}</option>)\r\n                        })}\r\n                    </Input>\r\n                </div>\r\n            </FormGroup>\r\n        </Col>\r\n    )\r\n}\r\n\r\nexport const readOnlySelect = field => {\r\n    const { meta: { touched, error } } = field;\r\n    const className = `${touched && error ? 'has-danger' : ''}`\r\n    const hasLabel = !(typeof field.label === 'undefined');\r\n    const xs = field.xs || 3;\r\n\r\n    return (\r\n        <Col xs={xs}>\r\n            <FormGroup className='form-group'>\r\n                {hasLabel\r\n                    ? <Label>{field.label}</Label>\r\n                    : <span></span>\r\n                }\r\n                <div>\r\n                    <Input\r\n                        title={field.placeholder}\r\n                        className={className}\r\n                        type=\"select\"\r\n                        readOnly='readOnly'\r\n                        {...field.input}\r\n                    >\r\n                        <option key='' value=' '> </option>\r\n                        {field.lookup.map(function (item) {\r\n                            return (<option key={item.key} value={item.key}>{item.value}</option>)\r\n                        })}\r\n                    </Input>\r\n                </div>\r\n            </FormGroup>\r\n        </Col>\r\n    )\r\n}\r\n","import React, { Component } from 'react';\r\nimport CurrencyFormat from 'react-currency-format';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n    Field,\r\n    reduxForm,\r\n} from 'redux-form';\r\nimport { getSchedule, selectSchedule } from './store/actions/schedule-action';\r\nimport _ from 'lodash';\r\n\r\nimport {\r\n    colField,\r\n    select,\r\n    currencyMask,\r\n} from './helpers/redux-form-helpers'\r\n\r\nimport {\r\n    Button\r\n    , Form\r\n    , FormGroup\r\n    , Row\r\n    , Col\r\n    , Card\r\n    , CardBody\r\n    , Label\r\n} from 'reactstrap';\r\n\r\nimport moment from 'moment';\r\nimport momentLocalizer from 'react-widgets-moment';\r\nmomentLocalizer(moment);\r\n\r\nclass Schedule extends Component {\r\n    handleChange(values) { console.log(values); }\r\n    componentDidMount() { }\r\n\r\n    onSubmit(values) {\r\n        const rates = this.props.state.schedule.lookup.rates;\r\n        values.rate = rates.find(x => (x.range.min <= values.amt && values.amt <= x.range.max)).key;\r\n\r\n        this.props.getSchedule(values);\r\n        //toast.success('Saved Contract');\r\n    }\r\n\r\n    onSelect(values) {\r\n        const schedule = JSON.parse(JSON.stringify(this.props.state.schedule));\r\n        values.amt = schedule.amt;\r\n        values.rate = this.props.state.schedule.lookup.rates\r\n            .find(x => (x.range.min <= values.amt && values.amt <= x.range.max));\r\n\r\n        this.props.selectSchedule(values);\r\n    }\r\n\r\n    renderSchedules(items) {\r\n        if (_.isEmpty(items)) {\r\n            return (<div></div>)\r\n        }\r\n\r\n        const subtext = {\r\n            fontSize: '60%',\r\n            fontStyle: 'italic'\r\n        }\r\n\r\n        const showAll = items.length > 12;\r\n        const amt = this.props.state.schedule.amt;\r\n        const rate = this.props.state.schedule.lookup.rates\r\n            .find(x => (x.range.min <= amt && amt <= x.range.max));\r\n\r\n        if (!showAll) {\r\n            return (\r\n                <Card><CardBody>\r\n                    Interest Rate: {rate.apr} <span style={subtext}>(Annual Percentage Rate)</span>\r\n                    <table id='elSchedules' className=\"table table-hover table-condensed f11 table-nowrap\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th className='text-center'>Months<br />&nbsp;</th>\r\n                                <th className='text-right'>Payment<br />&nbsp;</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {\r\n                                items.map(x => {\r\n                                    return (\r\n                                        <tr key={x.id} onClick={() => this.onSelect(x)}>\r\n                                            <td className='text-center'>{x.id}</td>\r\n                                            <td className='text-right'>{x.payment}</td>\r\n                                        </tr>\r\n                                    )\r\n                                })\r\n                            }\r\n                        </tbody>\r\n                    </table>\r\n                    <p style={subtext}>*APR=Annual Percentage Rate</p>\r\n                </CardBody></Card>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <Card><CardBody>\r\n                Interest Rate: {rate.apr} <span style={subtext}>(Annual Percentage Rate)</span>\r\n                <table id='elSchedules' className=\"table table-hover table-condensed f11 table-nowrap\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th className='text-center'>Months<br />&nbsp;</th>\r\n                            <th className='text-right'>Payment<br />&nbsp;(First 12)</th>\r\n                            <th className='text-right'>Payment<br />(after 12)</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {\r\n                            items.map(x => {\r\n                                return (\r\n                                    <tr key={x.id} onClick={() => this.onSelect(x)}>\r\n                                        <td className='text-center'>{x.id}</td>\r\n                                        <td className='text-right'>{x.payment}</td>\r\n                                        <td className='text-right'>{x.payment2 ? x.payment2 : ''}</td>\r\n                                    </tr>\r\n                                )\r\n                            })\r\n                        }\r\n                    </tbody>\r\n                </table>\r\n                <p style={subtext}>*APR=Annual Percentage Rate</p>\r\n            </CardBody></Card>\r\n        );\r\n    }\r\n\r\n    renderSelected(item) {\r\n        if (!item) return <span></span>\r\n        console.log(item);\r\n        return (\r\n            <Card>\r\n                <CardBody>\r\n                    <h5>Selected Plan:</h5>\r\n                    <br /><b>${item.amt.toMoney()}</b> borrowed at <b>{item.rate.apr}</b>\r\n                    <br />for <b>{item.time}</b> Months, with a monthly payment\r\n                    <br />of <b>${item.payment}</b> per month\r\n                </CardBody>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            //handleChange, \r\n            handleSubmit,\r\n            // change, \r\n            // values \r\n        } = this.props;//, pristine, reset, submitting}=this.props;\r\n        //const formValues = this.props.formValues;\r\n        const item = this.props.state.schedule || this.props.state.schedules;\r\n        const lookup = item.lookup;\r\n        const selected = this.props.state.schedule.selected;\r\n\r\n        if (_.isEmpty(item)) return (<div>loading...1</div>);\r\n        if (_.isEmpty(lookup)) return (<div>loading...2</div>);\r\n\r\n        return (\r\n            <span>\r\n                <h1>Suggested Payment Guide</h1>\r\n                <Form\r\n                    onSubmit={handleSubmit(this.onSubmit.bind(this))}\r\n                >\r\n                    <Card>\r\n                        <CardBody>\r\n                            <Row>\r\n                                <Field\r\n                                    name='amt'\r\n                                    label='Amount'\r\n                                    placeholder='Amount'\r\n                                    component={colField}\r\n                                    {...currencyMask}\r\n                                />\r\n                                <Field\r\n                                    name='range'\r\n                                    label='Months'\r\n                                    lookup={item.lookup.ranges}\r\n                                    component={select}\r\n                                    xs='3'\r\n                                />\r\n                                <Col>\r\n                                    <FormGroup className='submit'>\r\n                                        <Label>&nbsp;</Label>\r\n                                        <div>\r\n                                            <Button color='primary no-print'>Submit</Button>\r\n                                        </div>\r\n                                    </FormGroup>\r\n                                </Col>\r\n                            </Row>\r\n                        </CardBody>\r\n                    </Card>\r\n                </Form>\r\n                <br />\r\n                <Row>\r\n                    <Col xs='6'>\r\n                        {this.renderSchedules(item.schedules)}\r\n                    </Col>\r\n                    <Col xs='6'>\r\n                        {this.renderSelected(selected)}\r\n                    </Col>\r\n                </Row>\r\n            </span>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nfunction validate(values) { }\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n    return {\r\n        state,\r\n        initialValues: {\r\n            amt: 2000,\r\n            rate: 10,\r\n            range: 12,\r\n        }\r\n    };\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, { getSchedule, selectSchedule })(\r\n    reduxForm({\r\n        form: 'frmSchedule',\r\n        enableReinitialize: true,\r\n        validate\r\n    })(Schedule)\r\n)\r\n","import React, { Component } from 'react';\nimport Schedule from './Schedule';\nimport './App.css';\nimport {\n  Container\n} from 'reactstrap';\nclass App extends Component {\n  render() {\n    return (\n      <Container>\n        <div className=\"App\">\n          <Schedule></Schedule>\n        </div>\n      </Container>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n//import { Router, Route, Switch } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { store } from './helpers';//, history\nimport { ToastContainer } from 'react-toastify';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport './index.css';\nimport App from './App';\n\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n    <Provider store={store}>\n        <span>\n            <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/icon?family=Material+Icons\"></link>    \n            <ToastContainer />\n            <App></App>\n        </span>\n    </Provider> \n    , document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","exports.nil = new Error('#NULL!');\r\nexports.div0 = new Error('#DIV/0!');\r\nexports.value = new Error('#VALUE?');\r\nexports.ref = new Error('#REF!');\r\nexports.name = new Error('#NAME?');\r\nexports.num = new Error('#NUM!');\r\nexports.na = new Error('#N/A');\r\nexports.error = new Error('#ERROR!');\r\nexports.data = new Error('#GETTING_DATA');\r\n","var error = require('./error');\r\n\r\nfunction flattenShallow(array) {\r\n  if (!array || !array.reduce) { return array; }\r\n  return array.reduce(function(a, b) {\r\n    var aIsArray = Array.isArray(a);\r\n    var bIsArray = Array.isArray(b);\r\n    if (aIsArray && bIsArray ) {\r\n      return a.concat(b);\r\n    }\r\n    if (aIsArray) {\r\n      a.push(b);\r\n      return a;\r\n    }\r\n    if (bIsArray) {\r\n      return [a].concat(b);\r\n    }\r\n    return [a, b];\r\n  });\r\n}\r\n\r\nfunction isFlat(array) {\r\n  if (!array) { return false; }\r\n  for (var i = 0; i < array.length; ++i) {\r\n    if (Array.isArray(array[i])) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nexports.flatten = function() {\r\n  var result = exports.argsToArray.apply(null, arguments);\r\n  while (!isFlat(result)) {\r\n    result = flattenShallow(result);\r\n  }\r\n  return result;\r\n};\r\n\r\nexports.argsToArray = function(args) {\r\n  return Array.prototype.slice.call(args, 0);\r\n};\r\n\r\nexports.numbers = function() {\r\n  var possibleNumbers = this.flatten.apply(null, arguments);\r\n  return possibleNumbers.filter(function(el) {\r\n    return typeof el === 'number';\r\n  });\r\n};\r\n\r\nexports.cleanFloat = function(number) {\r\n  var power = 1e14;\r\n  return Math.round(number * power) / power;\r\n};\r\n\r\nexports.parseBool = function(bool) {\r\n  if (typeof bool === 'boolean') {\r\n    return bool;\r\n  }\r\n\r\n  if (bool instanceof Error) {\r\n    return bool;\r\n  }\r\n\r\n  if (typeof bool === 'number') {\r\n    return bool !== 0;\r\n  }\r\n\r\n  if (typeof bool === 'string') {\r\n    var up = bool.toUpperCase();\r\n    if (up === 'TRUE') {\r\n      return true;\r\n    }\r\n\r\n    if (up === 'FALSE') {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  if (bool instanceof Date && !isNaN(bool)) {\r\n    return true;\r\n  }\r\n\r\n  return error.value;\r\n};\r\n\r\nexports.parseNumber = function(string) {\r\n  if (string === undefined || string === '') {\r\n    return error.value;\r\n  }\r\n  if (!isNaN(string)) {\r\n    return parseFloat(string);\r\n  }\r\n  return error.value;\r\n};\r\n\r\nexports.parseNumberArray = function(arr) {\r\n  var len;\r\n  if (!arr || (len = arr.length) === 0) {\r\n    return error.value;\r\n  }\r\n  var parsed;\r\n  while (len--) {\r\n    parsed = exports.parseNumber(arr[len]);\r\n    if (parsed === error.value) {\r\n      return parsed;\r\n    }\r\n    arr[len] = parsed;\r\n  }\r\n  return arr;\r\n};\r\n\r\nexports.parseMatrix = function(matrix) {\r\n  var n; \r\n  if (!matrix || (n = matrix.length) === 0) {\r\n    return error.value;\r\n  }\r\n  var pnarr;\r\n  for (var i = 0; i < matrix.length; i++) {\r\n    pnarr = exports.parseNumberArray(matrix[i]);\r\n    matrix[i] = pnarr;\r\n    if (pnarr instanceof Error) {\r\n      return pnarr;\r\n    }\r\n  }\r\n  return matrix;\r\n};\r\n\r\nvar d1900 = new Date(1900, 0, 1);\r\nexports.parseDate = function(date) {\r\n  if (!isNaN(date)) {\r\n    if (date instanceof Date) {\r\n      return new Date(date);\r\n    }\r\n    var d = parseInt(date, 10);\r\n    if (d < 0) {\r\n      return error.num;\r\n    }\r\n    if (d <= 60) {\r\n      return new Date(d1900.getTime() + (d - 1) * 86400000);\r\n    }\r\n    return new Date(d1900.getTime() + (d - 2) * 86400000);\r\n  }\r\n  if (typeof date === 'string') {\r\n    date = new Date(date);\r\n    if (!isNaN(date)) {\r\n      return date;\r\n    }\r\n  }\r\n  return error.value;\r\n};\r\n\r\nexports.parseDateArray = function(arr) {\r\n  var len = arr.length;\r\n  var parsed;\r\n  while (len--) {\r\n    parsed = this.parseDate(arr[len]);\r\n    if (parsed === error.value) {\r\n      return parsed;\r\n    }\r\n    arr[len] = parsed;\r\n  }\r\n  return arr;\r\n};\r\n\r\nexports.anyIsError = function() {\r\n  var n = arguments.length;\r\n  while (n--) {\r\n    if (arguments[n] instanceof Error) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nexports.arrayValuesToNumbers = function(arr) {\r\n  var n = arr.length;\r\n  var el;\r\n  while (n--) {\r\n    el = arr[n];\r\n    if (typeof el === 'number') {\r\n      continue;\r\n    }\r\n    if (el === true) {\r\n      arr[n] = 1;\r\n      continue;\r\n    }\r\n    if (el === false) {\r\n      arr[n] = 0;\r\n      continue;\r\n    }\r\n    if (typeof el === 'string') {\r\n      var number = this.parseNumber(el);\r\n      if (number instanceof Error) {\r\n        arr[n] = 0;\r\n      } else {\r\n        arr[n] = number;\r\n      }\r\n    }\r\n  }\r\n  return arr;\r\n};\r\n\r\nexports.rest = function(array, idx) {\r\n  idx = idx || 1;\r\n  if (!array || typeof array.slice !== 'function') {\r\n    return array;\r\n  }\r\n  return array.slice(idx);\r\n};\r\n\r\nexports.initial = function(array, idx) {\r\n  idx = idx || 1;\r\n  if (!array || typeof array.slice !== 'function') {\r\n    return array;\r\n  }\r\n  return array.slice(0, array.length - idx);\r\n};","var error = require('./error');\r\nvar dateTime = require('./date-time');\r\nvar utils = require('./utils');\r\n\r\nfunction validDate(d) {\r\n  return d && d.getTime && !isNaN(d.getTime());\r\n}\r\n\r\nfunction ensureDate(d) {\r\n  return (d instanceof Date)?d:new Date(d);\r\n}\r\n\r\nexports.ACCRINT = function(issue, first, settlement, rate, par, frequency, basis) {\r\n  // Return error if either date is invalid\r\n  issue      = ensureDate(issue);\r\n  first      = ensureDate(first);\r\n  settlement = ensureDate(settlement);\r\n  if (!validDate(issue) || !validDate(first) || !validDate(settlement)) {\r\n    return '#VALUE!';\r\n  }\r\n\r\n  // Return error if either rate or par are lower than or equal to zero\r\n  if (rate <= 0 || par <= 0) {\r\n    return '#NUM!';\r\n  }\r\n\r\n  // Return error if frequency is neither 1, 2, or 4\r\n  if ([1, 2, 4].indexOf(frequency) === -1) {\r\n    return '#NUM!';\r\n  }\r\n\r\n  // Return error if basis is neither 0, 1, 2, 3, or 4\r\n  if ([0, 1, 2, 3, 4].indexOf(basis) === -1) {\r\n    return '#NUM!';\r\n  }\r\n\r\n  // Return error if settlement is before or equal to issue\r\n  if (settlement <= issue) {\r\n    return '#NUM!';\r\n  }\r\n\r\n  // Set default values\r\n  par   = par   || 0;\r\n  basis = basis || 0;\r\n\r\n  // Compute accrued interest\r\n  return par * rate * dateTime.YEARFRAC(issue, settlement, basis);\r\n};\r\n\r\n// TODO\r\nexports.ACCRINTM = function() {\r\n throw new Error('ACCRINTM is not implemented');\r\n};\r\n\r\n// TODO\r\nexports.AMORDEGRC = function() {\r\n throw new Error('AMORDEGRC is not implemented');\r\n};\r\n\r\n// TODO\r\nexports.AMORLINC = function() {\r\n throw new Error('AMORLINC is not implemented');\r\n};\r\n\r\n// TODO\r\nexports.COUPDAYBS = function() {\r\n throw new Error('COUPDAYBS is not implemented');\r\n};\r\n\r\n// TODO\r\nexports.COUPDAYS = function() {\r\n throw new Error('COUPDAYS is not implemented');\r\n};\r\n\r\n// TODO\r\nexports.COUPDAYSNC = function() {\r\n throw new Error('COUPDAYSNC is not implemented');\r\n};\r\n\r\n// TODO\r\nexports.COUPNCD = function() {\r\n throw new Error('COUPNCD is not implemented');\r\n};\r\n\r\n// TODO\r\nexports.COUPNUM = function() {\r\n throw new Error('COUPNUM is not implemented');\r\n};\r\n\r\n// TODO\r\nexports.COUPPCD = function() {\r\n throw new Error('COUPPCD is not implemented');\r\n};\r\n\r\nexports.CUMIPMT = function(rate, periods, value, start, end, type) {\r\n  // Credits: algorithm inspired by Apache OpenOffice\r\n  // Credits: Hannes Stiebitzhofer for the translations of function and variable names\r\n  // Requires exports.FV() and exports.PMT() from exports.js [http://stoic.com/exports/]\r\n\r\n  rate = utils.parseNumber(rate);\r\n  periods = utils.parseNumber(periods);\r\n  value = utils.parseNumber(value);\r\n  if (utils.anyIsError(rate, periods, value)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Return error if either rate, periods, or value are lower than or equal to zero\r\n  if (rate <= 0 || periods <= 0 || value <= 0) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return error if start < 1, end < 1, or start > end\r\n  if (start < 1 || end < 1 || start > end) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return error if type is neither 0 nor 1\r\n  if (type !== 0 && type !== 1) {\r\n    return error.num;\r\n  }\r\n\r\n  // Compute cumulative interest\r\n  var payment = exports.PMT(rate, periods, value, 0, type);\r\n  var interest = 0;\r\n\r\n  if (start === 1) {\r\n    if (type === 0) {\r\n      interest = -value;\r\n      start++;\r\n    }\r\n  }\r\n\r\n  for (var i = start; i <= end; i++) {\r\n    if (type === 1) {\r\n      interest += exports.FV(rate, i - 2, payment, value, 1) - payment;\r\n    } else {\r\n      interest += exports.FV(rate, i - 1, payment, value, 0);\r\n    }\r\n  }\r\n  interest *= rate;\r\n\r\n  // Return cumulative interest\r\n  return interest;\r\n};\r\n\r\nexports.CUMPRINC = function(rate, periods, value, start, end, type) {\r\n  // Credits: algorithm inspired by Apache OpenOffice\r\n  // Credits: Hannes Stiebitzhofer for the translations of function and variable names\r\n\r\n  rate = utils.parseNumber(rate);\r\n  periods = utils.parseNumber(periods);\r\n  value = utils.parseNumber(value);\r\n  if (utils.anyIsError(rate, periods, value)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Return error if either rate, periods, or value are lower than or equal to zero\r\n  if (rate <= 0 || periods <= 0 || value <= 0) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return error if start < 1, end < 1, or start > end\r\n  if (start < 1 || end < 1 || start > end) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return error if type is neither 0 nor 1\r\n  if (type !== 0 && type !== 1) {\r\n    return error.num;\r\n  }\r\n\r\n  // Compute cumulative principal\r\n  var payment = exports.PMT(rate, periods, value, 0, type);\r\n  var principal = 0;\r\n  if (start === 1) {\r\n    if (type === 0) {\r\n      principal = payment + value * rate;\r\n    } else {\r\n      principal = payment;\r\n    }\r\n    start++;\r\n  }\r\n  for (var i = start; i <= end; i++) {\r\n    if (type > 0) {\r\n      principal += payment - (exports.FV(rate, i - 2, payment, value, 1) - payment) * rate;\r\n    } else {\r\n      principal += payment - exports.FV(rate, i - 1, payment, value, 0) * rate;\r\n    }\r\n  }\r\n\r\n  // Return cumulative principal\r\n  return principal;\r\n};\r\n\r\nexports.DB = function(cost, salvage, life, period, month) {\r\n  // Initialize month\r\n  month = (month === undefined) ? 12 : month;\r\n\r\n  cost = utils.parseNumber(cost);\r\n  salvage = utils.parseNumber(salvage);\r\n  life = utils.parseNumber(life);\r\n  period = utils.parseNumber(period);\r\n  month = utils.parseNumber(month);\r\n  if (utils.anyIsError(cost, salvage, life, period, month)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Return error if any of the parameters is negative\r\n  if (cost < 0 || salvage < 0 || life < 0 || period < 0) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return error if month is not an integer between 1 and 12\r\n  if ([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12].indexOf(month) === -1) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return error if period is greater than life\r\n  if (period > life) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return 0 (zero) if salvage is greater than or equal to cost\r\n  if (salvage >= cost) {\r\n    return 0;\r\n  }\r\n\r\n  // Rate is rounded to three decimals places\r\n  var rate = (1 - Math.pow(salvage / cost, 1 / life)).toFixed(3);\r\n\r\n  // Compute initial depreciation\r\n  var initial = cost * rate * month / 12;\r\n\r\n  // Compute total depreciation\r\n  var total = initial;\r\n  var current = 0;\r\n  var ceiling = (period === life) ? life - 1 : period;\r\n  for (var i = 2; i <= ceiling; i++) {\r\n    current = (cost - total) * rate;\r\n    total += current;\r\n  }\r\n\r\n  // Depreciation for the first and last periods are special cases\r\n  if (period === 1) {\r\n    // First period\r\n    return initial;\r\n  } else if (period === life) {\r\n    // Last period\r\n    return (cost - total) * rate;\r\n  } else {\r\n    return current;\r\n  }\r\n};\r\n\r\nexports.DDB = function(cost, salvage, life, period, factor) {\r\n  // Initialize factor\r\n  factor = (factor === undefined) ? 2 : factor;\r\n\r\n  cost = utils.parseNumber(cost);\r\n  salvage = utils.parseNumber(salvage);\r\n  life = utils.parseNumber(life);\r\n  period = utils.parseNumber(period);\r\n  factor = utils.parseNumber(factor);\r\n  if (utils.anyIsError(cost, salvage, life, period, factor)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Return error if any of the parameters is negative or if factor is null\r\n  if (cost < 0 || salvage < 0 || life < 0 || period < 0 || factor <= 0) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return error if period is greater than life\r\n  if (period > life) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return 0 (zero) if salvage is greater than or equal to cost\r\n  if (salvage >= cost) {\r\n    return 0;\r\n  }\r\n\r\n  // Compute depreciation\r\n  var total = 0;\r\n  var current = 0;\r\n  for (var i = 1; i <= period; i++) {\r\n    current = Math.min((cost - total) * (factor / life), (cost - salvage - total));\r\n    total += current;\r\n  }\r\n\r\n  // Return depreciation\r\n  return current;\r\n};\r\n\r\n// TODO\r\nexports.DISC = function() {\r\n throw new Error('DISC is not implemented');\r\n};\r\n\r\nexports.DOLLARDE = function(dollar, fraction) {\r\n  // Credits: algorithm inspired by Apache OpenOffice\r\n\r\n  dollar = utils.parseNumber(dollar);\r\n  fraction = utils.parseNumber(fraction);\r\n  if (utils.anyIsError(dollar, fraction)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Return error if fraction is negative\r\n  if (fraction < 0) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return error if fraction is greater than or equal to 0 and less than 1\r\n  if (fraction >= 0 && fraction < 1) {\r\n    return error.div0;\r\n  }\r\n\r\n  // Truncate fraction if it is not an integer\r\n  fraction = parseInt(fraction, 10);\r\n\r\n  // Compute integer part\r\n  var result = parseInt(dollar, 10);\r\n\r\n  // Add decimal part\r\n  result += (dollar % 1) * Math.pow(10, Math.ceil(Math.log(fraction) / Math.LN10)) / fraction;\r\n\r\n  // Round result\r\n  var power = Math.pow(10, Math.ceil(Math.log(fraction) / Math.LN2) + 1);\r\n  result = Math.round(result * power) / power;\r\n\r\n  // Return converted dollar price\r\n  return result;\r\n};\r\n\r\nexports.DOLLARFR = function(dollar, fraction) {\r\n  // Credits: algorithm inspired by Apache OpenOffice\r\n\r\n  dollar = utils.parseNumber(dollar);\r\n  fraction = utils.parseNumber(fraction);\r\n  if (utils.anyIsError(dollar, fraction)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Return error if fraction is negative\r\n  if (fraction < 0) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return error if fraction is greater than or equal to 0 and less than 1\r\n  if (fraction >= 0 && fraction < 1) {\r\n    return error.div0;\r\n  }\r\n\r\n  // Truncate fraction if it is not an integer\r\n  fraction = parseInt(fraction, 10);\r\n\r\n  // Compute integer part\r\n  var result = parseInt(dollar, 10);\r\n\r\n  // Add decimal part\r\n  result += (dollar % 1) * Math.pow(10, -Math.ceil(Math.log(fraction) / Math.LN10)) * fraction;\r\n\r\n  // Return converted dollar price\r\n  return result;\r\n};\r\n\r\n// TODO\r\nexports.DURATION = function() {\r\n throw new Error('DURATION is not implemented');\r\n};\r\n\r\nexports.EFFECT = function(rate, periods) {\r\n  rate = utils.parseNumber(rate);\r\n  periods = utils.parseNumber(periods);\r\n  if (utils.anyIsError(rate, periods)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Return error if rate <=0 or periods < 1\r\n  if (rate <= 0 || periods < 1) {\r\n    return error.num;\r\n  }\r\n\r\n  // Truncate periods if it is not an integer\r\n  periods = parseInt(periods, 10);\r\n\r\n  // Return effective annual interest rate\r\n  return Math.pow(1 + rate / periods, periods) - 1;\r\n};\r\n\r\nexports.FV = function(rate, periods, payment, value, type) {\r\n  // Credits: algorithm inspired by Apache OpenOffice\r\n\r\n  value = value || 0;\r\n  type = type || 0;\r\n\r\n  rate = utils.parseNumber(rate);\r\n  periods = utils.parseNumber(periods);\r\n  payment = utils.parseNumber(payment);\r\n  value = utils.parseNumber(value);\r\n  type = utils.parseNumber(type);\r\n  if (utils.anyIsError(rate, periods, payment, value, type)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Return future value\r\n  var result;\r\n  if (rate === 0) {\r\n    result = value + payment * periods;\r\n  } else {\r\n    var term = Math.pow(1 + rate, periods);\r\n    if (type === 1) {\r\n      result = value * term + payment * (1 + rate) * (term - 1) / rate;\r\n    } else {\r\n      result = value * term + payment * (term - 1) / rate;\r\n    }\r\n  }\r\n  return -result;\r\n};\r\n\r\nexports.FVSCHEDULE = function(principal, schedule) {\r\n  principal = utils.parseNumber(principal);\r\n  schedule = utils.parseNumberArray(utils.flatten(schedule));\r\n  if (utils.anyIsError(principal, schedule)) {\r\n    return error.value;\r\n  }\r\n\r\n  var n = schedule.length;\r\n  var future = principal;\r\n\r\n  // Apply all interests in schedule\r\n  for (var i = 0; i < n; i++) {\r\n    // Apply scheduled interest\r\n    future *= 1 + schedule[i];\r\n  }\r\n\r\n  // Return future value\r\n  return future;\r\n};\r\n\r\n// TODO\r\nexports.INTRATE = function() {\r\n throw new Error('INTRATE is not implemented');\r\n};\r\n\r\nexports.IPMT = function(rate, period, periods, present, future, type) {\r\n  // Credits: algorithm inspired by Apache OpenOffice\r\n\r\n  future = future || 0;\r\n  type = type || 0;\r\n\r\n  rate = utils.parseNumber(rate);\r\n  period = utils.parseNumber(period);\r\n  periods = utils.parseNumber(periods);\r\n  present = utils.parseNumber(present);\r\n  future = utils.parseNumber(future);\r\n  type = utils.parseNumber(type);\r\n  if (utils.anyIsError(rate, period, periods, present, future, type)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Compute payment\r\n  var payment = exports.PMT(rate, periods, present, future, type);\r\n\r\n  // Compute interest\r\n  var interest;\r\n  if (period === 1) {\r\n    if (type === 1) {\r\n      interest = 0;\r\n    } else {\r\n      interest = -present;\r\n    }\r\n  } else {\r\n    if (type === 1) {\r\n      interest = exports.FV(rate, period - 2, payment, present, 1) - payment;\r\n    } else {\r\n      interest = exports.FV(rate, period - 1, payment, present, 0);\r\n    }\r\n  }\r\n\r\n  // Return interest\r\n  return interest * rate;\r\n};\r\n\r\nexports.IRR = function(values, guess) {\r\n  // Credits: algorithm inspired by Apache OpenOffice\r\n\r\n  guess = guess || 0;\r\n\r\n  values = utils.parseNumberArray(utils.flatten(values));\r\n  guess = utils.parseNumber(guess);\r\n  if (utils.anyIsError(values, guess)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Calculates the resulting amount\r\n  var irrResult = function(values, dates, rate) {\r\n    var r = rate + 1;\r\n    var result = values[0];\r\n    for (var i = 1; i < values.length; i++) {\r\n      result += values[i] / Math.pow(r, (dates[i] - dates[0]) / 365);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  // Calculates the first derivation\r\n  var irrResultDeriv = function(values, dates, rate) {\r\n    var r = rate + 1;\r\n    var result = 0;\r\n    for (var i = 1; i < values.length; i++) {\r\n      var frac = (dates[i] - dates[0]) / 365;\r\n      result -= frac * values[i] / Math.pow(r, frac + 1);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  // Initialize dates and check that values contains at least one positive value and one negative value\r\n  var dates = [];\r\n  var positive = false;\r\n  var negative = false;\r\n  for (var i = 0; i < values.length; i++) {\r\n    dates[i] = (i === 0) ? 0 : dates[i - 1] + 365;\r\n    if (values[i] > 0) {\r\n      positive = true;\r\n    }\r\n    if (values[i] < 0) {\r\n      negative = true;\r\n    }\r\n  }\r\n\r\n  // Return error if values does not contain at least one positive value and one negative value\r\n  if (!positive || !negative) {\r\n    return error.num;\r\n  }\r\n\r\n  // Initialize guess and resultRate\r\n  guess = (guess === undefined) ? 0.1 : guess;\r\n  var resultRate = guess;\r\n\r\n  // Set maximum epsilon for end of iteration\r\n  var epsMax = 1e-10;\r\n\r\n  // Implement Newton's method\r\n  var newRate, epsRate, resultValue;\r\n  var contLoop = true;\r\n  do {\r\n    resultValue = irrResult(values, dates, resultRate);\r\n    newRate = resultRate - resultValue / irrResultDeriv(values, dates, resultRate);\r\n    epsRate = Math.abs(newRate - resultRate);\r\n    resultRate = newRate;\r\n    contLoop = (epsRate > epsMax) && (Math.abs(resultValue) > epsMax);\r\n  } while (contLoop);\r\n\r\n  // Return internal rate of return\r\n  return resultRate;\r\n};\r\n\r\nexports.ISPMT = function(rate, period, periods, value) {\r\n  rate = utils.parseNumber(rate);\r\n  period = utils.parseNumber(period);\r\n  periods = utils.parseNumber(periods);\r\n  value = utils.parseNumber(value);\r\n  if (utils.anyIsError(rate, period, periods, value)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Return interest\r\n  return value * rate * (period / periods - 1);\r\n};\r\n\r\n// TODO\r\nexports.MDURATION = function() {\r\n throw new Error('MDURATION is not implemented');\r\n};\r\n\r\nexports.MIRR = function(values, finance_rate, reinvest_rate) {\r\n  values = utils.parseNumberArray(utils.flatten(values));\r\n  finance_rate = utils.parseNumber(finance_rate);\r\n  reinvest_rate = utils.parseNumber(reinvest_rate);\r\n  if (utils.anyIsError(values, finance_rate, reinvest_rate)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Initialize number of values\r\n  var n = values.length;\r\n\r\n  // Lookup payments (negative values) and incomes (positive values)\r\n  var payments = [];\r\n  var incomes = [];\r\n  for (var i = 0; i < n; i++) {\r\n    if (values[i] < 0) {\r\n      payments.push(values[i]);\r\n    } else {\r\n      incomes.push(values[i]);\r\n    }\r\n  }\r\n\r\n  // Return modified internal rate of return\r\n  var num = -exports.NPV(reinvest_rate, incomes) * Math.pow(1 + reinvest_rate, n - 1);\r\n  var den = exports.NPV(finance_rate, payments) * (1 + finance_rate);\r\n  return Math.pow(num / den, 1 / (n - 1)) - 1;\r\n};\r\n\r\nexports.NOMINAL = function(rate, periods) {\r\n  rate = utils.parseNumber(rate);\r\n  periods = utils.parseNumber(periods);\r\n  if (utils.anyIsError(rate, periods)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Return error if rate <=0 or periods < 1\r\n  if (rate <= 0 || periods < 1) {\r\n    return error.num;\r\n  }\r\n\r\n  // Truncate periods if it is not an integer\r\n  periods = parseInt(periods, 10);\r\n\r\n  // Return nominal annual interest rate\r\n  return (Math.pow(rate + 1, 1 / periods) - 1) * periods;\r\n};\r\n\r\nexports.NPER = function(rate, payment, present, future, type) {\r\n  type = (type === undefined) ? 0 : type;\r\n  future = (future === undefined) ? 0 : future;\r\n\r\n  rate = utils.parseNumber(rate);\r\n  payment = utils.parseNumber(payment);\r\n  present = utils.parseNumber(present);\r\n  future = utils.parseNumber(future);\r\n  type = utils.parseNumber(type);\r\n  if (utils.anyIsError(rate, payment, present, future, type)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Return number of periods\r\n  var num = payment * (1 + rate * type) - future * rate;\r\n  var den = (present * rate + payment * (1 + rate * type));\r\n  return Math.log(num / den) / Math.log(1 + rate);\r\n};\r\n\r\nexports.NPV = function() {\r\n  var args = utils.parseNumberArray(utils.flatten(arguments));\r\n  if (args instanceof Error) {\r\n    return args;\r\n  }\r\n\r\n  // Lookup rate\r\n  var rate = args[0];\r\n\r\n  // Initialize net present value\r\n  var value = 0;\r\n\r\n  // Loop on all values\r\n  for (var j = 1; j < args.length; j++) {\r\n    value += args[j] / Math.pow(1 + rate, j);\r\n  }\r\n\r\n  // Return net present value\r\n  return value;\r\n};\r\n\r\n// TODO\r\nexports.ODDFPRICE = function() {\r\n throw new Error('ODDFPRICE is not implemented');\r\n};\r\n\r\n// TODO\r\nexports.ODDFYIELD = function() {\r\n throw new Error('ODDFYIELD is not implemented');\r\n};\r\n\r\n// TODO\r\nexports.ODDLPRICE = function() {\r\n throw new Error('ODDLPRICE is not implemented');\r\n};\r\n\r\n// TODO\r\nexports.ODDLYIELD = function() {\r\n throw new Error('ODDLYIELD is not implemented');\r\n};\r\n\r\nexports.PDURATION = function(rate, present, future) {\r\n  rate = utils.parseNumber(rate);\r\n  present = utils.parseNumber(present);\r\n  future = utils.parseNumber(future);\r\n  if (utils.anyIsError(rate, present, future)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Return error if rate <=0\r\n  if (rate <= 0) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return number of periods\r\n  return (Math.log(future) - Math.log(present)) / Math.log(1 + rate);\r\n};\r\n\r\nexports.PMT = function(rate, periods, present, future, type) {\r\n  //(ir,np,pv) =>{//(rate, time, principle)\r\n  let pay = (present * rate) / (1 - Math.pow(1 + rate, -periods));\r\n  return -pay;\r\n  \r\n  // Credits: algorithm inspired by Apache OpenOffice\r\n\r\n  // future = future || 0;\r\n  // type = type || 0;\r\n\r\n  // rate = utils.parseNumber(rate);\r\n  // periods = utils.parseNumber(periods);\r\n  // present = utils.parseNumber(present);\r\n  // future = utils.parseNumber(future);\r\n  // type = utils.parseNumber(type);\r\n  // if (utils.anyIsError(rate, periods, present, future, type)) {\r\n  //   return error.value;\r\n  // }\r\n\r\n  // // Return payment\r\n  // var result;\r\n  // if (rate === 0) {\r\n  //   result = (present + future) / periods;\r\n  // } else {\r\n  //   var term = Math.pow(1 + rate, periods);\r\n  //   if (type === 1) {\r\n  //     result = (future * rate / (term - 1) + present * rate / (1 - 1 / term)) / (1 + rate);\r\n  //   } else {\r\n  //     result = future * rate / (term - 1) + present * rate / (1 - 1 / term);\r\n  //   }\r\n  // }\r\n  // return -result;\r\n\r\n  \r\n\r\n\r\n};\r\n\r\nexports.PPMT = function(rate, period, periods, present, future, type) {\r\n  future = future || 0;\r\n  type = type || 0;\r\n\r\n  rate = utils.parseNumber(rate);\r\n  periods = utils.parseNumber(periods);\r\n  present = utils.parseNumber(present);\r\n  future = utils.parseNumber(future);\r\n  type = utils.parseNumber(type);\r\n  if (utils.anyIsError(rate, periods, present, future, type)) {\r\n    return error.value;\r\n  }\r\n\r\n  return exports.PMT(rate, periods, present, future, type) - exports.IPMT(rate, period, periods, present, future, type);\r\n};\r\n\r\n// TODO\r\nexports.PRICE = function() {\r\n throw new Error('PRICE is not implemented');\r\n};\r\n\r\n// TODO\r\nexports.PRICEDISC = function() {\r\n throw new Error('PRICEDISC is not implemented');\r\n};\r\n\r\n// TODO\r\nexports.PRICEMAT = function() {\r\n throw new Error('PRICEMAT is not implemented');\r\n};\r\n\r\nexports.PV = function(rate, periods, payment, future, type) {\r\n  future = future || 0;\r\n  type = type || 0;\r\n\r\n  rate = utils.parseNumber(rate);\r\n  periods = utils.parseNumber(periods);\r\n  payment = utils.parseNumber(payment);\r\n  future = utils.parseNumber(future);\r\n  type = utils.parseNumber(type);\r\n  if (utils.anyIsError(rate, periods, payment, future, type)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Return present value\r\n  if (rate === 0) {\r\n    return -payment * periods - future;\r\n  } else {\r\n    return (((1 - Math.pow(1 + rate, periods)) / rate) * payment * (1 + rate * type) - future) / Math.pow(1 + rate, periods);\r\n  }\r\n};\r\n\r\nexports.RATE = function(periods, payment, present, future, type, guess) {\r\n  // Credits: rabugento\r\n\r\n  guess = (guess === undefined) ? 0.01 : guess;\r\n  future = (future === undefined) ? 0 : future;\r\n  type = (type === undefined) ? 0 : type;\r\n\r\n  periods = utils.parseNumber(periods);\r\n  payment = utils.parseNumber(payment);\r\n  present = utils.parseNumber(present);\r\n  future = utils.parseNumber(future);\r\n  type = utils.parseNumber(type);\r\n  guess = utils.parseNumber(guess);\r\n  if (utils.anyIsError(periods, payment, present, future, type, guess)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Set maximum epsilon for end of iteration\r\n  var epsMax = 1e-6;\r\n\r\n  // Set maximum number of iterations\r\n  var iterMax = 100;\r\n  var iter = 0;\r\n  var close = false;\r\n  var rate = guess;\r\n\r\n  while (iter < iterMax && !close) {\r\n    var t1 = Math.pow(rate + 1, periods);\r\n    var t2 = Math.pow(rate + 1, periods - 1);\r\n\r\n    var f1 = future + t1 * present + payment * (t1 - 1) * (rate * type + 1) / rate;\r\n    var f2 = periods * t2 * present - payment * (t1 - 1) *(rate * type + 1) / Math.pow(rate,2);\r\n    var f3 = periods * payment * t2 * (rate * type + 1) / rate + payment * (t1 - 1) * type / rate;\r\n\r\n    var newRate = rate - f1 / (f2 + f3);\r\n\r\n    if (Math.abs(newRate - rate) < epsMax) close = true;\r\n    iter++\r\n    rate = newRate;\r\n  }\r\n\r\n  if (!close) return Number.NaN + rate;\r\n  return rate;\r\n};\r\n\r\n// TODO\r\nexports.RECEIVED = function() {\r\n throw new Error('RECEIVED is not implemented');\r\n};\r\n\r\nexports.RRI = function(periods, present, future) {\r\n  periods = utils.parseNumber(periods);\r\n  present = utils.parseNumber(present);\r\n  future = utils.parseNumber(future);\r\n  if (utils.anyIsError(periods, present, future)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Return error if periods or present is equal to 0 (zero)\r\n  if (periods === 0 || present === 0) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return equivalent interest rate\r\n  return Math.pow(future / present, 1 / periods) - 1;\r\n};\r\n\r\nexports.SLN = function(cost, salvage, life) {\r\n  cost = utils.parseNumber(cost);\r\n  salvage = utils.parseNumber(salvage);\r\n  life = utils.parseNumber(life);\r\n  if (utils.anyIsError(cost, salvage, life)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Return error if life equal to 0 (zero)\r\n  if (life === 0) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return straight-line depreciation\r\n  return (cost - salvage) / life;\r\n};\r\n\r\nexports.SYD = function(cost, salvage, life, period) {\r\n  // Return error if any of the parameters is not a number\r\n  cost = utils.parseNumber(cost);\r\n  salvage = utils.parseNumber(salvage);\r\n  life = utils.parseNumber(life);\r\n  period = utils.parseNumber(period);\r\n  if (utils.anyIsError(cost, salvage, life, period)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Return error if life equal to 0 (zero)\r\n  if (life === 0) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return error if period is lower than 1 or greater than life\r\n  if (period < 1 || period > life) {\r\n    return error.num;\r\n  }\r\n\r\n  // Truncate period if it is not an integer\r\n  period = parseInt(period, 10);\r\n\r\n  // Return straight-line depreciation\r\n  return ((cost - salvage) * (life - period + 1) * 2) / (life * (life + 1));\r\n};\r\n\r\nexports.TBILLEQ = function(settlement, maturity, discount) {\r\n  settlement = utils.parseDate(settlement);\r\n  maturity = utils.parseDate(maturity);\r\n  discount = utils.parseNumber(discount);\r\n  if (utils.anyIsError(settlement, maturity, discount)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Return error if discount is lower than or equal to zero\r\n  if (discount <= 0) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return error if settlement is greater than maturity\r\n  if (settlement > maturity) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return error if maturity is more than one year after settlement\r\n  if (maturity - settlement > 365 * 24 * 60 * 60 * 1000) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return bond-equivalent yield\r\n  return (365 * discount) / (360 - discount * dateTime.DAYS360(settlement, maturity, false));\r\n};\r\n\r\nexports.TBILLPRICE = function(settlement, maturity, discount) {\r\n  settlement = utils.parseDate(settlement);\r\n  maturity = utils.parseDate(maturity);\r\n  discount = utils.parseNumber(discount);\r\n  if (utils.anyIsError(settlement, maturity, discount)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Return error if discount is lower than or equal to zero\r\n  if (discount <= 0) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return error if settlement is greater than maturity\r\n  if (settlement > maturity) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return error if maturity is more than one year after settlement\r\n  if (maturity - settlement > 365 * 24 * 60 * 60 * 1000) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return bond-equivalent yield\r\n  return 100 * (1 - discount * dateTime.DAYS360(settlement, maturity, false) / 360);\r\n};\r\n\r\nexports.TBILLYIELD = function(settlement, maturity, price) {\r\n  settlement = utils.parseDate(settlement);\r\n  maturity = utils.parseDate(maturity);\r\n  price = utils.parseNumber(price);\r\n  if (utils.anyIsError(settlement, maturity, price)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Return error if price is lower than or equal to zero\r\n  if (price <= 0) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return error if settlement is greater than maturity\r\n  if (settlement > maturity) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return error if maturity is more than one year after settlement\r\n  if (maturity - settlement > 365 * 24 * 60 * 60 * 1000) {\r\n    return error.num;\r\n  }\r\n\r\n  // Return bond-equivalent yield\r\n  return (100 - price) * 360 / (price * dateTime.DAYS360(settlement, maturity, false));\r\n};\r\n\r\n// TODO\r\nexports.VDB = function() {\r\n throw new Error('VDB is not implemented');\r\n};\r\n\r\n\r\nexports.XIRR = function(values, dates, guess) {\r\n  // Credits: algorithm inspired by Apache OpenOffice\r\n\r\n  values = utils.parseNumberArray(utils.flatten(values));\r\n  dates = utils.parseDateArray(utils.flatten(dates));\r\n  guess = utils.parseNumber(guess);\r\n  if (utils.anyIsError(values, dates, guess)) {\r\n    return error.value;\r\n  }\r\n\r\n  // Calculates the resulting amount\r\n  var irrResult = function(values, dates, rate) {\r\n    var r = rate + 1;\r\n    var result = values[0];\r\n    for (var i = 1; i < values.length; i++) {\r\n      result += values[i] / Math.pow(r, dateTime.DAYS(dates[i], dates[0]) / 365);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  // Calculates the first derivation\r\n  var irrResultDeriv = function(values, dates, rate) {\r\n    var r = rate + 1;\r\n    var result = 0;\r\n    for (var i = 1; i < values.length; i++) {\r\n      var frac = dateTime.DAYS(dates[i], dates[0]) / 365;\r\n      result -= frac * values[i] / Math.pow(r, frac + 1);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  // Check that values contains at least one positive value and one negative value\r\n  var positive = false;\r\n  var negative = false;\r\n  for (var i = 0; i < values.length; i++) {\r\n    if (values[i] > 0) {\r\n      positive = true;\r\n    }\r\n    if (values[i] < 0) {\r\n      negative = true;\r\n    }\r\n  }\r\n\r\n  // Return error if values does not contain at least one positive value and one negative value\r\n  if (!positive || !negative) {\r\n    return error.num;\r\n  }\r\n\r\n  // Initialize guess and resultRate\r\n  guess = guess || 0.1;\r\n  var resultRate = guess;\r\n\r\n  // Set maximum epsilon for end of iteration\r\n  var epsMax = 1e-10;\r\n\r\n  // Implement Newton's method\r\n  var newRate, epsRate, resultValue;\r\n  var contLoop = true;\r\n  do {\r\n    resultValue = irrResult(values, dates, resultRate);\r\n    newRate = resultRate - resultValue / irrResultDeriv(values, dates, resultRate);\r\n    epsRate = Math.abs(newRate - resultRate);\r\n    resultRate = newRate;\r\n    contLoop = (epsRate > epsMax) && (Math.abs(resultValue) > epsMax);\r\n  } while (contLoop);\r\n\r\n  // Return internal rate of return\r\n  return resultRate;\r\n};\r\n\r\nexports.XNPV = function(rate, values, dates) {\r\n  rate = utils.parseNumber(rate);\r\n  values = utils.parseNumberArray(utils.flatten(values));\r\n  dates = utils.parseDateArray(utils.flatten(dates));\r\n  if (utils.anyIsError(rate, values, dates)) {\r\n    return error.value;\r\n  }\r\n\r\n  var result = 0;\r\n  for (var i = 0; i < values.length; i++) {\r\n    result += values[i] / Math.pow(1 + rate, dateTime.DAYS(dates[i], dates[0]) / 365);\r\n  }\r\n  return result;\r\n};\r\n\r\n// TODO\r\nexports.YIELD = function() {\r\n throw new Error('YIELD is not implemented');\r\n};\r\n\r\n// TODO\r\nexports.YIELDDISC = function() {\r\n throw new Error('YIELDDISC is not implemented');\r\n};\r\n\r\n// TODO\r\nexports.YIELDMAT = function() {\r\n throw new Error('YIELDMAT is not implemented');\r\n};"],"sourceRoot":""}